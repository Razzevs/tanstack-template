<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–≠–≤–æ–ª—é—Ü–∏—è –ø–∏–∫—Å–µ–ª—å–Ω–æ–≥–æ –º–∏—Ä–∞ - –í–µ—Ä—Å–∏—è 1.1.0</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a472a, #2c5e3a, #3d7a4d);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
            overflow-x: hidden;
        }
        
        .game-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .header {
            text-align: center;
            padding: 20px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 15px;
            border: 2px solid #8b5a2b;
            box-shadow: 0 0 20px rgba(139, 90, 43, 0.4);
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #8b5a2b, #d2691e, #8b5a2b);
        }
        
        .header h1 {
            font-size: 2.8rem;
            background: linear-gradient(to right, #d2691e, #8b5a2b);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 10px;
            text-shadow: 0 0 10px rgba(210, 105, 30, 0.5);
        }
        
        .version-badge {
            display: inline-block;
            background: linear-gradient(45deg, #8b5a2b, #d2691e);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            margin-left: 10px;
        }
        
        .stats {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 15px;
        }
        
        .stat-item {
            background: rgba(0, 20, 10, 0.7);
            padding: 10px 20px;
            border-radius: 10px;
            border: 1px solid #5d4037;
            min-width: 180px;
            position: relative;
        }
        
        .new-resource {
            border-color: #8b5a2b !important;
            background: rgba(43, 30, 0, 0.7) !important;
            animation: resourcePulse 2s infinite;
        }
        
        @keyframes resourcePulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }
        
        .new-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #8b5a2b;
            color: white;
            font-size: 0.7rem;
            padding: 3px 8px;
            border-radius: 10px;
        }
        
        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #d2691e;
        }
        
        .main-content {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .world-container {
            flex: 1;
            min-width: 300px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 15px;
            padding: 20px;
            border: 2px solid #5d4037;
            box-shadow: 0 0 25px rgba(93, 64, 55, 0.3);
            position: relative;
        }
        
        .weather-indicator {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.6);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            border: 1px solid #8b5a2b;
        }
        
        .time-indicator {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.6);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            border: 1px solid #d2691e;
        }
        
        .world-title {
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.5rem;
            color: #d2691e;
        }
        
        .world-canvas {
            width: 100%;
            height: 400px;
            background: rgba(30, 50, 30, 0.9);
            border-radius: 10px;
            border: 1px solid #5d4037;
            position: relative;
            overflow: hidden;
            transition: background-color 5s ease;
        }
        
        .world-canvas.night {
            background: rgba(10, 20, 30, 0.9);
        }
        
        .pixel {
            position: absolute;
            border-radius: 2px;
            transition: all 0.5s ease;
        }
        
        .tree {
            position: absolute;
            width: 20px;
            height: 30px;
            background: linear-gradient(to bottom, #228b22, #006400);
            border-radius: 50% 50% 40% 40%;
        }
        
        .stone {
            position: absolute;
            width: 15px;
            height: 15px;
            background: linear-gradient(45deg, #808080, #696969);
            border-radius: 3px;
            transform: rotate(45deg);
        }
        
        .building {
            position: absolute;
            border: 2px solid #8b5a2b;
            background: rgba(139, 90, 43, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }
        
        .upgrades-panel {
            flex: 1;
            min-width: 300px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 15px;
            padding: 20px;
            border: 2px solid #d2691e;
            box-shadow: 0 0 25px rgba(210, 105, 30, 0.3);
        }
        
        .panel-title {
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.5rem;
            color: #d2691e;
        }
        
        .upgrades-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
            max-height: 400px;
            overflow-y: auto;
            padding-right: 10px;
        }
        
        .upgrade-item {
            background: rgba(43, 30, 0, 0.7);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid #8b5a2b;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .upgrade-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(139, 90, 43, 0.3);
            background: rgba(60, 42, 0, 0.8);
        }
        
        .upgrade-item.purchased {
            background: rgba(20, 50, 20, 0.7);
            border-color: #2e8b57;
        }
        
        .upgrade-cost {
            display: flex;
            flex-direction: column;
            gap: 3px;
            align-items: flex-end;
        }
        
        .cost-item {
            font-size: 0.9rem;
            color: #d2691e;
        }
        
        .upgrade-item.purchased .cost-item {
            color: #2e8b57;
        }
        
        .actions-panel {
            flex-basis: 100%;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 15px;
            padding: 20px;
            border: 2px solid #5d4037;
            box-shadow: 0 0 25px rgba(93, 64, 55, 0.3);
        }
        
        .actions-title {
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.5rem;
            color: #5d4037;
        }
        
        .actions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .action-btn {
            padding: 15px;
            background: rgba(43, 30, 0, 0.7);
            border: 1px solid #8b5a2b;
            border-radius: 10px;
            color: white;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }
        
        .action-btn:hover {
            background: rgba(60, 42, 0, 0.9);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(139, 90, 43, 0.3);
        }
        
        .action-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        .action-icon {
            font-size: 1.8rem;
        }
        
        .buildings-panel {
            flex: 1;
            min-width: 300px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 15px;
            padding: 20px;
            border: 2px solid #2e8b57;
            box-shadow: 0 0 25px rgba(46, 139, 87, 0.3);
        }
        
        .buildings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .building-item {
            background: rgba(20, 40, 20, 0.7);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid #2e8b57;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .building-item:hover {
            transform: translateY(-3px);
            background: rgba(30, 60, 30, 0.8);
        }
        
        .building-icon {
            font-size: 2rem;
        }
        
        .building-count {
            font-size: 1.2rem;
            color: #d2691e;
            font-weight: bold;
        }
        
        .achievements {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 300px;
            background: rgba(0, 0, 0, 0.8);
            border-radius: 10px;
            padding: 15px;
            border: 2px solid #8b5a2b;
            display: none;
            z-index: 1000;
        }
        
        .achievement-unlocked {
            animation: achievementPop 0.5s ease-out;
            display: block !important;
        }
        
        @keyframes achievementPop {
            0% { transform: translateX(100%); opacity: 0; }
            70% { transform: translateX(-10px); opacity: 1; }
            100% { transform: translateX(0); opacity: 1; }
        }
        
        .achievement-title {
            color: #d2691e;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .progress-bar {
            height: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            margin: 10px 0;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, #8b5a2b, #d2691e);
            border-radius: 10px;
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .world-evolution {
            height: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            margin-top: 20px;
            overflow: hidden;
        }
        
        .evolution-fill {
            height: 100%;
            background: linear-gradient(to right, #5d4037, #8b5a2b, #d2691e);
            border-radius: 10px;
            width: 0%;
            transition: width 1s ease;
        }
        
        .notification {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.9);
            padding: 15px 25px;
            border-radius: 10px;
            border: 1px solid #8b5a2b;
            display: none;
            z-index: 1000;
        }
        
        .notification.show {
            display: block;
            animation: fadeInOut 3s ease;
        }
        
        @keyframes fadeInOut {
            0% { opacity: 0; bottom: 0; }
            20% { opacity: 1; bottom: 20px; }
            80% { opacity: 1; bottom: 20px; }
            100% { opacity: 0; bottom: 0; }
        }
        
        .trade-btn {
            margin-top: 10px;
            padding: 8px 16px;
            background: rgba(210, 105, 30, 0.8);
            border: none;
            border-radius: 5px;
            color: white;
            cursor: pointer;
            font-size: 0.9rem;
        }
        
        .trade-btn:hover {
            background: rgba(210, 105, 30, 1);
        }
        
        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
            
            .achievements {
                position: static;
                width: 100%;
                margin-top: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="header">
            <h1>–≠–í–û–õ–Æ–¶–ò–Ø –ü–ò–ö–°–ï–õ–¨–ù–û–ì–û –ú–ò–†–ê <span class="version-badge">v1.1.0</span></h1>
            <p>–°–æ–±–∏—Ä–∞–π—Ç–µ —Ä–µ—Å—É—Ä—Å—ã, —Å—Ç—Ä–æ–π—Ç–µ –∑–¥–∞–Ω–∏—è –∏ —Ä–∞–∑–≤–∏–≤–∞–π—Ç–µ —Å–≤–æ—é —Ü–∏–≤–∏–ª–∏–∑–∞—Ü–∏—é!</p>
            
            <div class="stats">
                <div class="stat-item">
                    <div>–≠–ù–ï–†–ì–ò–Ø</div>
                    <div class="stat-value" id="energy-value">100</div>
                </div>
                <div class="stat-item">
                    <div>–¢–ï–•–ù–û–õ–û–ì–ò–ò</div>
                    <div class="stat-value" id="tech-value">0</div>
                </div>
                <div class="stat-item new-resource">
                    <div>–î–†–ï–í–ï–°–ò–ù–ê</div>
                    <div class="stat-value" id="wood-value">20</div>
                    <div class="new-badge">–ù–û–í–û–ï</div>
                </div>
                <div class="stat-item new-resource">
                    <div>–ö–ê–ú–ï–ù–¨</div>
                    <div class="stat-value" id="stone-value">10</div>
                    <div class="new-badge">–ù–û–í–û–ï</div>
                </div>
                <div class="stat-item">
                    <div>–ù–ê–°–ï–õ–ï–ù–ò–ï</div>
                    <div class="stat-value" id="population-value">10</div>
                </div>
            </div>
            
            <div class="world-evolution">
                <div class="evolution-fill" id="evolution-bar"></div>
            </div>
        </div>
        
        <div class="main-content">
            <div class="world-container">
                <div class="time-indicator" id="time-indicator">üåû –î–µ–Ω—å</div>
                <div class="weather-indicator" id="weather-indicator">‚òÄÔ∏è –Ø—Å–Ω–æ</div>
                <div class="world-title">–í–ê–® –ú–ò–†</div>
                <div class="world-canvas" id="world-canvas">
                    <!-- –ú–∏—Ä –±—É–¥–µ—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –∑–¥–µ—Å—å -->
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="world-progress"></div>
                </div>
                <div style="text-align: center; margin-top: 10px;">–ü—Ä–æ–≥—Ä–µ—Å—Å —Ä–∞–∑–≤–∏—Ç–∏—è: <span id="progress-percent">0%</span> | –≠–ø–æ—Ö–∞: <span id="era-display">–ö–∞–º–µ–Ω–Ω—ã–π –≤–µ–∫</span></div>
                <button class="trade-btn" onclick="openTrade()">–û–±–º–µ–Ω—è—Ç—å —Ä–µ—Å—É—Ä—Å—ã (1:1)</button>
            </div>
            
            <div class="upgrades-panel">
                <div class="panel-title">–£–õ–£–ß–®–ï–ù–ò–Ø</div>
                <div class="upgrades-list" id="upgrades-list">
                    <!-- –£–ª—É—á—à–µ–Ω–∏—è –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —Å—é–¥–∞ -->
                </div>
            </div>
            
            <div class="buildings-panel">
                <div class="panel-title">–ü–û–°–¢–†–û–ô–ö–ò</div>
                <div class="buildings-grid" id="buildings-grid">
                    <!-- –ó–¥–∞–Ω–∏—è –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —Å—é–¥–∞ -->
                </div>
            </div>
            
            <div class="actions-panel">
                <div class="actions-title">–î–ï–ô–°–¢–í–ò–Ø</div>
                <div class="actions-grid" id="actions-grid">
                    <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —Å—é–¥–∞ -->
                </div>
            </div>
        </div>
    </div>
    
    <div class="achievements" id="achievements-panel">
        <div class="achievement-title" id="achievement-title">–î–û–°–¢–ò–ñ–ï–ù–ò–ï –†–ê–ó–ë–õ–û–ö–ò–†–û–í–ê–ù–û!</div>
        <div id="achievement-desc">–í—ã –¥–æ—Å—Ç–∏–≥–ª–∏ –Ω–æ–≤–æ–≥–æ —É—Ä–æ–≤–Ω—è —Ä–∞–∑–≤–∏—Ç–∏—è!</div>
    </div>
    
    <div class="notification" id="notification">–†–µ—Å—É—Ä—Å—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã!</div>

    <script>
        // –ò–≥—Ä–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        const gameState = {
            energy: 100,
            technology: 0,
            wood: 20,
            stone: 10,
            population: 10,
            era: 0,
            eraNames: ["–ö–∞–º–µ–Ω–Ω—ã–π –≤–µ–∫", "–ë—Ä–æ–Ω–∑–æ–≤—ã–π –≤–µ–∫", "–ñ–µ–ª–µ–∑–Ω—ã–π –≤–µ–∫", "–°—Ä–µ–¥–Ω–µ–≤–µ–∫–æ–≤—å–µ", "–†–µ–Ω–µ—Å—Å–∞–Ω—Å", "–ò–Ω–¥—É—Å—Ç—Ä–∏–∞–ª—å–Ω–∞—è —ç–ø–æ—Ö–∞", "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è —ç—Ä–∞", "–ë—É–¥—É—â–µ–µ"],
            progress: 0,
            upgrades: [],
            buildings: {
                house: 0,
                sawmill: 0,
                quarry: 0,
                library: 0,
                workshop: 0
            },
            achievements: [],
            worldElements: [],
            timeOfDay: 0, // 0-23 —á–∞—Å–∞
            isDay: true,
            weather: 'clear'
        };

        // –í—Å–µ —É–ª—É—á—à–µ–Ω–∏—è –≤ –∏–≥—Ä–µ
        const allUpgrades = [
            { id: 1, name: "–ö–∞–º–µ–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã", description: "+50% –∫ –¥–æ–±—ã—á–µ –∫–∞–º–Ω—è", cost: { wood: 20, stone: 30 }, type: "stone", multiplier: 1.5, icon: "‚õèÔ∏è" },
            { id: 2, name: "–õ–µ—Å–æ–ø–∏–ª–∫–∞", description: "–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –¥–æ–±—ã—á—É –¥—Ä–µ–≤–µ—Å–∏–Ω—ã", cost: { wood: 50, stone: 20 }, type: "wood", add: 5, icon: "üå≤" },
            { id: 3, name: "–ü–∏—Å—å–º–µ–Ω–Ω–æ—Å—Ç—å", description: "–û—Ç–∫—Ä—ã–≤–∞–µ—Ç —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏", cost: { wood: 30, stone: 40 }, type: "tech", add: 2, icon: "üìú" },
            { id: 4, name: "–ú–µ—Ç–∞–ª–ª—É—Ä–≥–∏—è", description: "–£–ª—É—á—à–∞–µ—Ç –≤—Å–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã", cost: { wood: 100, stone: 150 }, type: "multiply", multiplier: 1.3, icon: "üî•" },
            { id: 5, name: "–°–µ–ª—å—Å–∫–æ–µ —Ö–æ–∑—è–π—Å—Ç–≤–æ", description: "+10 –∫ –Ω–∞—Å–µ–ª–µ–Ω–∏—é", cost: { wood: 80, stone: 60 }, type: "population", add: 10, icon: "üåæ" },
            { id: 6, name: "–¢–æ—Ä–≥–æ–≤–ª—è", description: "–£–ª—É—á—à–∞–µ—Ç –æ–±–º–µ–Ω —Ä–µ—Å—É—Ä—Å–æ–≤", cost: { wood: 120, stone: 100 }, type: "trade", multiplier: 1.5, icon: "üí∞" },
            { id: 7, name: "–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞", description: "–£–º–µ–Ω—å—à–∞–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ—Å—Ç—Ä–æ–µ–∫", cost: { wood: 200, stone: 250 }, type: "buildings", multiplier: 0.8, icon: "üèõÔ∏è" },
            { id: 8, name: "–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ", description: "+100% –∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º", cost: { wood: 150, stone: 200 }, type: "tech", multiplier: 2, icon: "üéì" }
        ];

        // –í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –≤ –∏–≥—Ä–µ
        const allActions = [
            { id: 1, name: "–°–æ–±—Ä–∞—Ç—å —è–≥–æ–¥—ã", description: "–ü–æ–ª—É—á–∏—Ç—å —ç–Ω–µ—Ä–≥–∏—é", reward: 15, type: "energy", icon: "üçì", cost: {} },
            { id: 2, name: "–†—É–±–∏—Ç—å –¥–µ—Ä–µ–≤—å—è", description: "–ü–æ–ª—É—á–∏—Ç—å –¥—Ä–µ–≤–µ—Å–∏–Ω—É", reward: 8, type: "wood", icon: "ü™ì", cost: { energy: 5 } },
            { id: 3, name: "–î–æ–±—ã–≤–∞—Ç—å –∫–∞–º–µ–Ω—å", description: "–ü–æ–ª—É—á–∏—Ç—å –∫–∞–º–µ–Ω—å", reward: 5, type: "stone", icon: "üóø", cost: { energy: 8 } },
            { id: 4, name: "–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å", description: "–ü–æ–ª—É—á–∏—Ç—å —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏", reward: 10, type: "tech", icon: "üî¨", cost: { energy: 15 } },
            { id: 5, name: "–û—Ö–æ—Ç–∏—Ç—å—Å—è", description: "–ü—Ä–æ–∫–æ—Ä–º–∏—Ç—å –Ω–∞—Å–µ–ª–µ–Ω–∏–µ", reward: 5, type: "population", icon: "üèπ", cost: { energy: 20 } },
            { id: 6, name: "–°—Ç—Ä–æ–∏—Ç—å", description: "–£–≤–µ–ª–∏—á–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å", reward: 3, type: "progress", icon: "üèóÔ∏è", cost: { wood: 10, stone: 5 } }
        ];

        // –í—Å–µ –ø–æ—Å—Ç—Ä–æ–π–∫–∏ –≤ –∏–≥—Ä–µ
        const allBuildings = [
            { id: "house", name: "–ñ–∏–ª–∏—â–µ", description: "+5 –∫ –Ω–∞—Å–µ–ª–µ–Ω–∏—é", cost: { wood: 30, stone: 20 }, effect: { population: 5 }, icon: "üè†" },
            { id: "sawmill", name: "–õ–µ—Å–æ–ø–∏–ª–∫–∞", description: "+2 –¥—Ä–µ–≤–µ—Å–∏–Ω—ã/—Ö–æ–¥", cost: { wood: 50, stone: 30 }, effect: { woodPerTurn: 2 }, icon: "üå≤" },
            { id: "quarry", name: "–ö–∞–º–µ–Ω–æ–ª–æ–º–Ω—è", description: "+1 –∫–∞–º–Ω—è/—Ö–æ–¥", cost: { wood: 40, stone: 60 }, effect: { stonePerTurn: 1 }, icon: "‚õ∞Ô∏è" },
            { id: "library", name: "–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞", description: "+2 —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏/—Ö–æ–¥", cost: { wood: 80, stone: 40 }, effect: { techPerTurn: 2 }, icon: "üìö" },
            { id: "workshop", name: "–ú–∞—Å—Ç–µ—Ä—Å–∫–∞—è", description: "–£—Å–∫–æ—Ä—è–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å", cost: { wood: 100, stone: 80 }, effect: { progressBonus: 10 }, icon: "‚öíÔ∏è" }
        ];

        // –í—Å–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –≤ –∏–≥—Ä–µ
        const allAchievements = [
            { id: 1, name: "–ü–µ—Ä–≤—ã–π –ª–µ—Å–æ—Ä—É–±", description: "–°–æ–±–µ—Ä–∏—Ç–µ 100 –¥—Ä–µ–≤–µ—Å–∏–Ω—ã", condition: () => totalWoodCollected >= 100, unlocked: false },
            { id: 2, name: "–ö–∞–º–µ–Ω–æ—Ç—ë—Å", description: "–°–æ–±–µ—Ä–∏—Ç–µ 50 –∫–∞–º–Ω—è", condition: () => totalStoneCollected >= 50, unlocked: false },
            { id: 3, name: "–°—Ç—Ä–æ–∏—Ç–µ–ª—å", description: "–ü–æ—Å—Ç—Ä–æ–π—Ç–µ 5 –∑–¥–∞–Ω–∏–π", condition: () => Object.values(gameState.buildings).reduce((a, b) => a + b) >= 5, unlocked: false },
            { id: 4, name: "–ù–æ–≤–∞—è —ç—Ä–∞", description: "–î–æ—Å—Ç–∏–≥–Ω–∏—Ç–µ –±—Ä–æ–Ω–∑–æ–≤–æ–≥–æ –≤–µ–∫–∞", condition: () => gameState.era >= 1, unlocked: false }
        ];

        let totalWoodCollected = 20;
        let totalStoneCollected = 10;

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        function initGame() {
            updateUI();
            createWorld();
            renderUpgrades();
            renderActions();
            renderBuildings();
            
            // –ó–∞–ø—É—Å–∫–∞–µ–º –∏–≥—Ä–æ–≤—ã–µ —Ü–∏–∫–ª—ã
            setInterval(gameTick, 3000); // –ö–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã
            setInterval(updateTime, 60000); // –ö–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ = 1 —á–∞—Å –∏–≥—Ä–æ–≤–æ–≥–æ
            setInterval(animateWorld, 100);
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
            showNotification("–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—É—é –∏–≥—Ä—É! –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ —Ä–µ—Å—É—Ä—Å—ã –∏ –ø–æ—Å—Ç—Ä–æ–π–∫–∏!");
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ –º–∏—Ä–∞
        function createWorld() {
            const canvas = document.getElementById('world-canvas');
            gameState.worldElements = [];
            
            // –û—á–∏—â–∞–µ–º –∫–∞–Ω–≤–∞—Å
            canvas.innerHTML = '';
            
            // –î–æ–±–∞–≤–ª—è–µ–º –¥–µ—Ä–µ–≤—å—è
            for (let i = 0; i < 8; i++) {
                const tree = document.createElement('div');
                tree.className = 'tree';
                tree.style.left = `${10 + i * 10}%`;
                tree.style.top = `${30 + Math.random() * 40}%`;
                canvas.appendChild(tree);
                gameState.worldElements.push(tree);
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∫–∞–º–Ω–∏
            for (let i = 0; i < 6; i++) {
                const stone = document.createElement('div');
                stone.className = 'stone';
                stone.style.left = `${15 + i * 12}%`;
                stone.style.top = `${60 + Math.random() * 20}%`;
                canvas.appendChild(stone);
                gameState.worldElements.push(stone);
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Ñ–æ–Ω –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤—Ä–µ–º–µ–Ω–∏ —Å—É—Ç–æ–∫
            updateWorldAppearance();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–Ω–µ—à–Ω–µ–≥–æ –≤–∏–¥–∞ –º–∏—Ä–∞
        function updateWorldAppearance() {
            const canvas = document.getElementById('world-canvas');
            const timeIndicator = document.getElementById('time-indicator');
            
            if (gameState.isDay) {
                canvas.classList.remove('night');
                timeIndicator.textContent = `üåû –î–µ–Ω—å (${gameState.timeOfDay}:00)`;
            } else {
                canvas.classList.add('night');
                timeIndicator.textContent = `üåô –ù–æ—á—å (${gameState.timeOfDay}:00)`;
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–æ–≥–æ–¥—ã
            document.getElementById('weather-indicator').textContent = 
                gameState.weather === 'clear' ? '‚òÄÔ∏è –Ø—Å–Ω–æ' : 
                gameState.weather === 'rain' ? 'üåßÔ∏è –î–æ–∂–¥—å' : '‚òÅÔ∏è –û–±–ª–∞—á–Ω–æ';
        }

        // –ò–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
        function gameTick() {
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç –ø–æ—Å—Ç—Ä–æ–µ–∫
            if (gameState.buildings.sawmill > 0) {
                gameState.wood += gameState.buildings.sawmill * 2;
                showNotification(`–õ–µ—Å–æ–ø–∏–ª–∫–∏: +${gameState.buildings.sawmill * 2} –¥—Ä–µ–≤–µ—Å–∏–Ω—ã`);
            }
            
            if (gameState.buildings.quarry > 0) {
                gameState.stone += gameState.buildings.quarry;
                showNotification(`–ö–∞–º–µ–Ω–æ–ª–æ–º–Ω–∏: +${gameState.buildings.quarry} –∫–∞–º–Ω—è`);
            }
            
            if (gameState.buildings.library > 0) {
                gameState.technology += gameState.buildings.library * 2;
                showNotification(`–ë–∏–±–ª–∏–æ—Ç–µ–∫–∏: +${gameState.buildings.library * 2} —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π`);
            }
            
            // –®—Ç—Ä–∞—Ñ –∑–∞ –ø–µ—Ä–µ–Ω–∞—Å–µ–ª–µ–Ω–∏–µ
            const populationLimit = 10 + (gameState.buildings.house * 5);
            if (gameState.population > populationLimit) {
                const penalty = Math.floor((gameState.population - populationLimit) * 0.1);
                gameState.energy = Math.max(0, gameState.energy - penalty);
                if (penalty > 0) {
                    showNotification(`–ü–µ—Ä–µ–Ω–∞—Å–µ–ª–µ–Ω–∏–µ! -${penalty} —ç–Ω–µ—Ä–≥–∏–∏`);
                }
            }
            
            updateUI();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏
        function updateTime() {
            gameState.timeOfDay = (gameState.timeOfDay + 1) % 24;
            gameState.isDay = gameState.timeOfDay >= 6 && gameState.timeOfDay < 20;
            
            // –°–ª—É—á–∞–π–Ω–∞—è —Å–º–µ–Ω–∞ –ø–æ–≥–æ–¥—ã
            if (Math.random() < 0.2) {
                const weathers = ['clear', 'cloudy', 'rain'];
                gameState.weather = weathers[Math.floor(Math.random() * weathers.length)];
            }
            
            // –í–ª–∏—è–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ —Å—É—Ç–æ–∫ –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
            if (!gameState.isDay) {
                showNotification("–ù–æ—á—å: –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å–Ω–∏–∂–µ–Ω–∞ –Ω–∞ 30%");
            }
            
            updateWorldAppearance();
            updateUI();
        }

        // –ê–Ω–∏–º–∞—Ü–∏—è –º–∏—Ä–∞
        function animateWorld() {
            // –ü—Ä–æ—Å—Ç–∞—è –∞–Ω–∏–º–∞—Ü–∏—è - —Å–ª—É—á–∞–π–Ω–æ–µ –º–µ—Ä—Ü–∞–Ω–∏–µ
            gameState.worldElements.forEach(element => {
                if (Math.random() < 0.01) {
                    element.style.opacity = Math.random() * 0.5 + 0.5;
                }
            });
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        function updateUI() {
            document.getElementById('energy-value').textContent = Math.floor(gameState.energy);
            document.getElementById('tech-value').textContent = Math.floor(gameState.technology);
            document.getElementById('wood-value').textContent = Math.floor(gameState.wood);
            document.getElementById('stone-value').textContent = Math.floor(gameState.stone);
            document.getElementById('population-value').textContent = Math.floor(gameState.population);
            document.getElementById('era-display').textContent = gameState.eraNames[gameState.era];
            
            // –ü—Ä–æ–≥—Ä–µ—Å—Å —Ä–∞–∑–≤–∏—Ç–∏—è
            const progressPercent = Math.min(100, gameState.progress);
            document.getElementById('world-progress').style.width = `${progressPercent}%`;
            document.getElementById('progress-percent').textContent = `${Math.floor(progressPercent)}%`;
            
            // –ü—Ä–æ–≥—Ä–µ—Å—Å —ç—Ä—ã
            const eraProgress = (gameState.era / (gameState.eraNames.length - 1)) * 100;
            document.getElementById('evolution-bar').style.width = `${eraProgress}%`;
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
            checkAchievements();
        }

        // –†–µ–Ω–¥–µ—Ä —É–ª—É—á—à–µ–Ω–∏–π
        function renderUpgrades() {
            const container = document.getElementById('upgrades-list');
            container.innerHTML = '';
            
            allUpgrades.forEach(upgrade => {
                const isPurchased = gameState.upgrades.includes(upgrade.id);
                const canAfford = canAffordUpgrade(upgrade);
                
                const upgradeElement = document.createElement('div');
                upgradeElement.className = `upgrade-item ${isPurchased ? 'purchased' : ''}`;
                
                let costHTML = '';
                if (upgrade.cost.wood) costHTML += `<div class="cost-item">üå≤ ${upgrade.cost.wood}</div>`;
                if (upgrade.cost.stone) costHTML += `<div class="cost-item">üóø ${upgrade.cost.stone}</div>`;
                if (upgrade.cost.energy) costHTML += `<div class="cost-item">‚ö° ${upgrade.cost.energy}</div>`;
                
                upgradeElement.innerHTML = `
                    <div>
                        <div style="font-weight: bold; margin-bottom: 5px;">${upgrade.icon} ${upgrade.name}</div>
                        <div style="font-size: 0.9rem; opacity: 0.8;">${upgrade.description}</div>
                    </div>
                    <div class="upgrade-cost">
                        ${isPurchased ? '<div class="cost-item">–ö–£–ü–õ–ï–ù–û</div>' : costHTML}
                    </div>
                `;
                
                if (!isPurchased && canAfford) {
                    upgradeElement.addEventListener('click', () => purchaseUpgrade(upgrade));
                }
                
                container.appendChild(upgradeElement);
            });
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ–∫—É–ø–∫–∏ —É–ª—É—á—à–µ–Ω–∏—è
        function canAffordUpgrade(upgrade) {
            for (const [resource, cost] of Object.entries(upgrade.cost)) {
                if (gameState[resource] < cost) return false;
            }
            return true;
        }

        // –ü–æ–∫—É–ø–∫–∞ —É–ª—É—á—à–µ–Ω–∏—è
        function purchaseUpgrade(upgrade) {
            if (!canAffordUpgrade(upgrade) || gameState.upgrades.includes(upgrade.id)) return;
            
            // –°–ø–∏—Å—ã–≤–∞–µ–º —Ä–µ—Å—É—Ä—Å—ã
            for (const [resource, cost] of Object.entries(upgrade.cost)) {
                gameState[resource] -= cost;
            }
            
            gameState.upgrades.push(upgrade.id);
            
            // –ü—Ä–∏–º–µ–Ω—è–µ–º —ç—Ñ—Ñ–µ–∫—Ç —É–ª—É—á—à–µ–Ω–∏—è
            applyUpgradeEffect(upgrade);
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            showNotification(`–£–ª—É—á—à–µ–Ω–∏–µ "${upgrade.name}" –∫—É–ø–ª–µ–Ω–æ!`);
            
            // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å
            gameState.progress += 8;
            checkEraProgression();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
            updateUI();
            renderUpgrades();
            renderActions();
        }

        // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∞ —É–ª—É—á—à–µ–Ω–∏—è
        function applyUpgradeEffect(upgrade) {
            // –≠—Ñ—Ñ–µ–∫—Ç—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π
            // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
        }

        // –†–µ–Ω–¥–µ—Ä –¥–µ–π—Å—Ç–≤–∏–π
        function renderActions() {
            const container = document.getElementById('actions-grid');
            container.innerHTML = '';
            
            allActions.forEach(action => {
                const canAfford = canAffordAction(action);
                const isNightPenalty = !gameState.isDay;
                
                const actionElement = document.createElement('button');
                actionElement.className = 'action-btn';
                actionElement.disabled = !canAfford;
                
                let reward = action.reward;
                // –ü—Ä–∏–º–µ–Ω—è–µ–º –Ω–æ—á–Ω–æ–π —à—Ç—Ä–∞—Ñ
                if (isNightPenalty && action.type !== 'progress') {
                    reward = Math.floor(reward * 0.7);
                }
                
                // –ü—Ä–∏–º–µ–Ω—è–µ–º —É–ª—É—á—à–µ–Ω–∏—è
                if (action.type === 'wood' && gameState.upgrades.includes(2)) {
                    reward += 5;
                }
                if (action.type === 'stone' && gameState.upgrades.includes(1)) {
                    reward = Math.floor(reward * 1.5);
                }
                if (action.type === 'tech' && gameState.upgrades.includes(8)) {
                    reward *= 2;
                }
                
                actionElement.innerHTML = `
                    <div class="action-icon">${action.icon}</div>
                    <div style="font-weight: bold;">${action.name}</div>
                    <div style="font-size: 0.8rem; opacity: 0.8;">${action.description}</div>
                    <div style="font-size: 0.9rem; color: #d2691e; margin-top: 5px;">
                        +${reward} ${getResourceName(action.type)}
                        ${isNightPenalty && action.type !== 'progress' ? '<div style="font-size:0.7rem;color:#ff6b6b;">(–Ω–æ—á—å -30%)</div>' : ''}
                    </div>
                `;
                
                if (canAfford) {
                    actionElement.addEventListener('click', () => performAction(action));
                }
                
                container.appendChild(actionElement);
            });
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—è
        function canAffordAction(action) {
            for (const [resource, cost] of Object.entries(action.cost)) {
                if (gameState[resource] < cost) return false;
            }
            return true;
        }

        // –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è
        function performAction(action) {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–æ–∏–º–æ—Å—Ç—å
            for (const [resource, cost] of Object.entries(action.cost)) {
                if (gameState[resource] < cost) return;
                gameState[resource] -= cost;
            }
            
            // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –Ω–∞–≥—Ä–∞–¥—É
            let reward = action.reward;
            
            // –ü—Ä–∏–º–µ–Ω—è–µ–º –Ω–æ—á–Ω–æ–π —à—Ç—Ä–∞—Ñ
            if (!gameState.isDay && action.type !== 'progress') {
                reward = Math.floor(reward * 0.7);
            }
            
            // –ü—Ä–∏–º–µ–Ω—è–µ–º —É–ª—É—á—à–µ–Ω–∏—è
            switch(action.type) {
                case 'wood':
                    if (gameState.upgrades.includes(2)) reward += 5;
                    totalWoodCollected += reward;
                    break;
                case 'stone':
                    if (gameState.upgrades.includes(1)) reward = Math.floor(reward * 1.5);
                    totalStoneCollected += reward;
                    break;
                case 'tech':
                    if (gameState.upgrades.includes(8)) reward *= 2;
                    break;
            }
            
            // –ü—Ä–∏–º–µ–Ω—è–µ–º —É–ª—É—á—à–µ–Ω–∏–µ "–ú–µ—Ç–∞–ª–ª—É—Ä–≥–∏—è" –∫–æ –≤—Å–µ–º —Ä–µ—Å—É—Ä—Å–∞–º
            if (gameState.upgrades.includes(4)) {
                reward = Math.floor(reward * 1.3);
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º –Ω–∞–≥—Ä–∞–¥—É
            gameState[action.type] += reward;
            
            // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å
            if (action.type !== 'progress') {
                gameState.progress += 1;
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–µ—Ä–µ—Ö–æ–¥ –≤ –Ω–æ–≤—É—é —ç—Ä—É
            checkEraProgression();
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            showNotification(`+${reward} ${getResourceName(action.type)}`);
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
            updateUI();
            renderActions();
        }

        // –†–µ–Ω–¥–µ—Ä –ø–æ—Å—Ç—Ä–æ–µ–∫
        function renderBuildings() {
            const container = document.getElementById('buildings-grid');
            container.innerHTML = '';
            
            allBuildings.forEach(building => {
                const count = gameState.buildings[building.id] || 0;
                const canAfford = canAffordBuilding(building);
                
                const buildingElement = document.createElement('div');
                buildingElement.className = 'building-item';
                
                buildingElement.innerHTML = `
                    <div class="building-icon">${building.icon}</div>
                    <div style="font-weight: bold; text-align: center;">${building.name}</div>
                    <div style="font-size: 0.8rem; text-align: center; opacity: 0.8;">${building.description}</div>
                    <div class="building-count">${count}</div>
                    <div style="font-size: 0.7rem; text-align: center;">
                        ${building.cost.wood ? `üå≤${building.cost.wood} ` : ''}
                        ${building.cost.stone ? `üóø${building.cost.stone}` : ''}
                    </div>
                `;
                
                if (canAfford) {
                    buildingElement.addEventListener('click', () => constructBuilding(building));
                }
                
                container.appendChild(buildingElement);
            });
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ—Å—Ç—Ä–æ–π–∫–∏
        function canAffordBuilding(building) {
            for (const [resource, cost] of Object.entries(building.cost)) {
                if (gameState[resource] < cost) return false;
            }
            return true;
        }

        // –°—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ –∑–¥–∞–Ω–∏—è
        function constructBuilding(building) {
            if (!canAffordBuilding(building)) return;
            
            // –°–ø–∏—Å—ã–≤–∞–µ–º —Ä–µ—Å—É—Ä—Å—ã
            for (const [resource, cost] of Object.entries(building.cost)) {
                gameState[resource] -= cost;
            }
            
            // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ –∑–¥–∞–Ω–∏—è
            gameState.buildings[building.id] = (gameState.buildings[building.id] || 0) + 1;
            
            // –ü—Ä–∏–º–µ–Ω—è–µ–º —ç—Ñ—Ñ–µ–∫—Ç –∑–¥–∞–Ω–∏—è
            applyBuildingEffect(building);
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            showNotification(`–ü–æ—Å—Ç—Ä–æ–µ–Ω–æ: ${building.name}!`);
            
            // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å
            gameState.progress += 5;
            checkEraProgression();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
            updateUI();
            renderBuildings();
            renderActions();
        }

        // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∞ –∑–¥–∞–Ω–∏—è
        function applyBuildingEffect(building) {
            if (building.effect.population) {
                gameState.population += building.effect.population;
            }
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–∞ –≤ –Ω–æ–≤—É—é —ç—Ä—É
        function checkEraProgression() {
            if (gameState.progress >= 100 && gameState.era < gameState.eraNames.length - 1) {
                gameState.era++;
                gameState.progress = 0;
                showAchievement(`–ù–æ–≤–∞—è —ç—Ä–∞: ${gameState.eraNames[gameState.era]}!`);
            }
        }

        // –¢–æ—Ä–≥–æ–≤–ª—è —Ä–µ—Å—É—Ä—Å–∞–º–∏
        function openTrade() {
            const tradeRate = gameState.upgrades.includes(6) ? 1.5 : 1;
            
            if (confirm(`–û–±–º–µ–Ω—è—Ç—å —Ä–µ—Å—É—Ä—Å—ã –ø–æ –∫—É—Ä—Å—É 1:1?${tradeRate > 1 ? ' (–£–ª—É—á—à–µ–Ω–∏–µ —Ç–æ—Ä–≥–æ–≤–ª–∏: +50%)' : ''}\n\n–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ—Å—É—Ä—Å –¥–ª—è –æ–±–º–µ–Ω–∞:`)) {
                const resource1 = prompt("–ö–∞–∫–æ–π —Ä–µ—Å—É—Ä—Å –æ—Ç–¥–∞–µ—Ç–µ? (–¥–µ—Ä–µ–≤–æ, –∫–∞–º–µ–Ω—å, —ç–Ω–µ—Ä–≥–∏—è)").toLowerCase();
                const resource2 = prompt("–ö–∞–∫–æ–π —Ä–µ—Å—É—Ä—Å –ø–æ–ª—É—á–∞–µ—Ç–µ? (–¥–µ—Ä–µ–≤–æ, –∫–∞–º–µ–Ω—å, —ç–Ω–µ—Ä–≥–∏—è)").toLowerCase();
                const amount = parseInt(prompt("–°–∫–æ–ª—å–∫–æ –µ–¥–∏–Ω–∏—Ü –æ–±–º–µ–Ω–∏–≤–∞–µ—Ç–µ?"));
                
                if (gameState[resource1] >= amount) {
                    gameState[resource1] -= amount;
                    gameState[resource2] += Math.floor(amount * tradeRate);
                    showNotification(`–û–±–º–µ–Ω: ${amount} ${resource1} ‚Üí ${Math.floor(amount * tradeRate)} ${resource2}`);
                    updateUI();
                } else {
                    alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ä–µ—Å—É—Ä—Å–æ–≤!");
                }
            }
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
        function checkAchievements() {
            allAchievements.forEach(achievement => {
                if (!achievement.unlocked && achievement.condition()) {
                    achievement.unlocked = true;
                    showAchievement(achievement.name, achievement.description);
                }
            });
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ
        function showAchievement(title, description = '') {
            const panel = document.getElementById('achievements-panel');
            document.getElementById('achievement-title').textContent = title;
            document.getElementById('achievement-desc').textContent = description || '–í—ã –¥–æ—Å—Ç–∏–≥–ª–∏ –Ω–æ–≤–æ–≥–æ —É—Ä–æ–≤–Ω—è —Ä–∞–∑–≤–∏—Ç–∏—è!';
            
            panel.classList.add('achievement-unlocked');
            
            setTimeout(() => {
                panel.classList.remove('achievement-unlocked');
            }, 5000);
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        function showNotification(text) {
            const notification = document.getElementById('notification');
            notification.textContent = text;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–∞–∑–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–∞
        function getResourceName(type) {
            switch(type) {
                case 'energy': return '—ç–Ω–µ—Ä–≥–∏–∏';
                case 'tech': return '—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π';
                case 'wood': return '–¥—Ä–µ–≤–µ—Å–∏–Ω—ã';
                case 'stone': return '–∫–∞–º–Ω—è';
                case 'population': return '–Ω–∞—Å–µ–ª–µ–Ω–∏—è';
                case 'progress': return '–ø—Ä–æ–≥—Ä–µ—Å—Å–∞';
                default: return '—Ä–µ—Å—É—Ä—Å–æ–≤';
            }
        }

        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>